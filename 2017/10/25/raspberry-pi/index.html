<!doctype html><html lang=zh-Hans dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Raspberry Pi 手记 | NOWHERE</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://xnth97.github.io/2017/10/25/raspberry-pi><meta data-rh=true property=og:locale content=zh_Hans><meta data-rh=true name=docusaurus_locale content=zh-Hans><meta data-rh=true name=docusaurus_tag content=default><meta data-rh=true name=docsearch:language content=zh-Hans><meta data-rh=true name=docsearch:docusaurus_tag content=default><meta data-rh=true property=og:title content="Raspberry Pi 手记 | NOWHERE"><meta data-rh=true name=description content="近期搞来一块新电脑（？）不能免俗，选择了 Raspberry Pi 3B。树莓派的牛皮纸袋包装真的很可爱，乍一看真的很像从超市买了一袋子树莓回来。"><meta data-rh=true property=og:description content="近期搞来一块新电脑（？）不能免俗，选择了 Raspberry Pi 3B。树莓派的牛皮纸袋包装真的很可爱，乍一看真的很像从超市买了一袋子树莓回来。"><meta data-rh=true property=og:type content=article><meta data-rh=true property=article:published_time content=2017-10-25T22:25:51.000Z><meta data-rh=true property=article:tag content=daily,gears><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://xnth97.github.io/2017/10/25/raspberry-pi><link data-rh=true rel=alternate href=https://xnth97.github.io/2017/10/25/raspberry-pi hreflang=zh-Hans><link data-rh=true rel=alternate href=https://xnth97.github.io/2017/10/25/raspberry-pi hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://xnth97.github.io/2017/10/25/raspberry-pi","@type":"BlogPosting","author":[],"datePublished":"2017-10-25T22:25:51.000Z","description":"近期搞来一块新电脑（？）不能免俗，选择了 Raspberry Pi 3B。树莓派的牛皮纸袋包装真的很可爱，乍一看真的很像从超市买了一袋子树莓回来。","headline":"Raspberry Pi 手记","isPartOf":{"@id":"https://xnth97.github.io/","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://xnth97.github.io/2017/10/25/raspberry-pi","name":"Raspberry Pi 手记","url":"https://xnth97.github.io/2017/10/25/raspberry-pi"}</script><link rel=alternate type=application/rss+xml href=/rss.xml title="NOWHERE RSS Feed"><link rel=alternate type=application/atom+xml href=/atom.xml title="NOWHERE Atom Feed"><link rel=stylesheet href=/assets/css/styles.586283b3.css><script src=/assets/js/runtime~main.0c79fe9c.js defer></script><script src=/assets/js/main.604aff34.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label=跳到主要内容><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>跳到主要内容</a></div><nav aria-label=主导航 class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label=切换导航栏 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/avatar.png alt="Blog avatar" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/avatar.png alt="Blog avatar" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">NOWHERE</b></a><a class="navbar__item navbar__link" href=/tags/daily>日常</a><a class="navbar__item navbar__link" href=/tags/gears>剁手</a><a class="navbar__item navbar__link" href=/tags/note>笔记</a><a class="navbar__item navbar__link" href=/tags/travel>旅行</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/link>友链</a><a class="navbar__item navbar__link" href=/now>近况</a><a class="navbar__item navbar__link" href=/about>关于我</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><main class="col col--9 col--offset-1"><article class=""><header><h1 class=title_f1Hy>Raspberry Pi 手记</h1><div class="container_mt6G margin-vert--md"><time datetime=2017-10-25T22:25:51.000Z>2017年10月25日</time> · <!-- -->阅读需 9 分钟</div></header><div id=__blog-post-container class=markdown><p>近期搞来一块新电脑（？）不能免俗，选择了 Raspberry Pi 3B。树莓派的牛皮纸袋包装真的很可爱，乍一看真的很像从超市买了一袋子树莓回来。</p>
<p><img decoding=async loading=lazy src=/assets/images/1-57fe61125554ba5d17e1b24614e03398.jpg width=720 height=721 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=初始化>初始化<a href=#初始化 class=hash-link aria-label=初始化的直接链接 title=初始化的直接链接>​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安装系统>安装系统<a href=#安装系统 class=hash-link aria-label=安装系统的直接链接 title=安装系统的直接链接>​</a></h3>
<p>准备一张 MicroSD 卡，系统镜像直接下载 <a href=https://www.raspberrypi.org/downloads/raspbian/ target=_blank rel="noopener noreferrer">Raspbian</a>。有个 Noobs 是一个 easy installer，没什么用处。下载镜像后烧写到 MicroSD 卡里，推荐使用 <a href=https://etcher.io target=_blank rel="noopener noreferrer">Etcher</a>，全平台的一个简洁好用的镜像烧写工具。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=无头启动>“无头”启动<a href=#无头启动 class=hash-link aria-label=“无头”启动的直接链接 title=“无头”启动的直接链接>​</a></h3>
<p>一般来说，树莓派是需要接上 USB 键鼠、HDMI 连接显示器、插上网线启动的。这些东西我一个都没有，于是使用所谓 headless setup 的方法，直接使树莓派连接上 WiFi 热点并开启 ssh。首先打开 MicroSD 卡的 boot 分区，<code>touch ssh</code> 放入一个空白的 <code>ssh</code> 文件，告诉系统打开 ssh。然后在同样位置创建一个 <code>wpa_supplicant.conf</code> 文件，内容为：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">country=US # 这里换成你所在的国家</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">update_config=1</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">network={</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    ssid="你的 WiFi SSID"</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">    psk="你的 WiFi 密码"</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>这样树莓派启动后会自动读取配置连接 WiFi 热点，即可以用 ssh 愉快地玩耍了。上电。</p>
<p><img decoding=async loading=lazy src=/assets/images/2-d2b2e6638663056a18cd01bc477264b6.jpg width=720 height=720 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=设置>设置<a href=#设置 class=hash-link aria-label=设置的直接链接 title=设置的直接链接>​</a></h3>
<p>在自己路由器管理页面记住树莓派的 IP，用 <code>ssh pi@树莓派的 IP</code> 连接，默认密码为 raspberry。初次启动，使用 <code>sudo passwd</code> 更改下密码，然后 <code>sudo raspi-config</code> 命令进入树莓派的设置工具。</p>
<p>我在这里进行的变更有：</p>
<ul>
<li>Boot options -> Desktop / CLI -> Console</li>
<li>Interfacing options -> VNC -> Enable</li>
<li>Advanced options -> Expand filesystem</li>
</ul>
<p>开启第二步后，不熟悉命令行的话也可以通过 VNC 连接远程桌面使用树莓派了。需要在终端内启动 <code>vncserver :1</code>，然后就可以从 VNC 客户端里通过 <code>树莓派的 IP:1</code> 连接了。不使用的话可以 <code>vncserver -kill :1</code> 关闭。</p>
<p>一切就绪，安装好 vim、oh-my-zsh、git 之类工具，树莓派基本就可用了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=搭建下载机>搭建下载机<a href=#搭建下载机 class=hash-link aria-label=搭建下载机的直接链接 title=搭建下载机的直接链接>​</a></h2>
<p>搞树莓派的核心需求是搭建一个能够远程控制的下载机，同时我在家里的时候可以直接访问树莓派连接的硬盘，甚至直接通过兼容流媒体协议的 app 播放。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=挂载硬盘>挂载硬盘<a href=#挂载硬盘 class=hash-link aria-label=挂载硬盘的直接链接 title=挂载硬盘的直接链接>​</a></h3>
<p>这里我的硬盘因为要兼容 macOS 和 Windows，所以格式化为了 exFAT 格式，需要安装对应读写的驱动：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> exfat-fuse</span><br></span></code></pre></div></div>
<p>之后挂载移动硬盘到 /mnt/hdd：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">mount</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">uid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">pi,gid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">pi /dev/sda1 /mnt/hdd</span><br></span></code></pre></div></div>
<p>不用后弹出：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">umount</span><span class="token plain"> /mnt/hdd</span><br></span></code></pre></div></div>
<p>注意：由于电压原因，树莓派直接连接移动硬盘可能不稳定。我的方法是将移动硬盘连接到有 USB 接口的显示器，再把显示器 USB 线连接到树莓派上。如果有带有供电的 USB HUB 理论上应该也可以。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安装-aria2>安装 aria2<a href=#安装-aria2 class=hash-link aria-label="安装 aria2的直接链接" title="安装 aria2的直接链接">​</a></h3>
<p>大名鼎鼎的 aria2 就无需多言了。直接安装：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> aria2</span><br></span></code></pre></div></div>
<p>接下来需要给 aria2 创建两个文件：一个配置文件，一个用来保存下载会话。找到一个合适的路径，<code>touch aria2.session</code> 创建空白会话文件。然后 <code>vim aria2.conf</code>，编辑配置文件：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">dir = /path/to/your/downloads # 下载存储路径</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">enable-rpc = true # 开启 RPC，以下几个选项均和远程控制有关</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">rpc-allow-origin-all = true</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">rpc-listen-all = true</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">continue = true # 断点续传</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">input-file = /path/to/aria2.session # 会话文件路径，下同</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">save-session = /path/to/aria2.session</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">max-concurrent-downloads = 5 # 最大同时下载数</span><br></span></code></pre></div></div>
<p>加载配置文件，并以 daemon 模式启动 aria2：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> aria2c --conf-path</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">/path/to/aria2.conf </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-D</span><br></span></code></pre></div></div>
<p>或使用 pm2：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">pm2 start aria2c -- --conf-path</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">/path/to/aria2.conf</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=远程控制>远程控制<a href=#远程控制 class=hash-link aria-label=远程控制的直接链接 title=远程控制的直接链接>​</a></h3>
<p>远程控制就是在本地开一个服务器，提供一个访问 aria2 的 Web UI，然后通过路由器的 port forwarding 暴露到公网上，即可以远程访问 Web UI 管理下载任务了。首先开一个自己习惯的服务器，我使用的是 nginx，安装好后编辑配置文件自己指定 nginx 的根目录，启动 nginx：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> nginx</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">vim</span><span class="token plain"> /etc/nginx/sites-enabled/default</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">service</span><span class="token plain"> nginx start</span><br></span></code></pre></div></div>
<p>接下来选择一个适用于 aria2 的 Web UI，我使用的是 <a href=https://github.com/ziahamza/webui-aria2 target=_blank rel="noopener noreferrer">webui-aria2</a>。进入自己设置的服务器根目录，<code>git clone https://github.com/ziahamza/webui-aria2.git</code>，改个名字 <code>mv webui-aria2 aria2</code>，即可以通过 <code>树莓派的 IP/aria2</code> 访问 aria2 的 Web UI 了。最后在自己路由器上打开 port forwarding，注意给树莓派保留 IP 而不要任凭路由器 DHCP，分配一个端口给树莓派的 80 端口。然后根据 aria2 的教程设置密钥访问，即可以远程安全的管理自己的下载任务了。</p>
<p><img decoding=async loading=lazy src=/assets/images/4-75e83f5c4e12d2d36006ecb00be73281.png width=1240 height=889 class=img_ev3q></p>
<blockquote>
<p>美帝连国内凄惨的下载速度</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=文件服务器>文件服务器<a href=#文件服务器 class=hash-link aria-label=文件服务器的直接链接 title=文件服务器的直接链接>​</a></h3>
<p>文件服务器通过 SMB 协议，安装 samba：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> samba samba-common-bin</span><br></span></code></pre></div></div>
<p>修改配置文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">vim</span><span class="token plain"> /etc/samba/smb.conf</span><br></span></code></pre></div></div>
<p>添加自己下载目录的配置：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">[hdd]</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">path = /path/to/your/hdd</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">valid users = pi</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">browseable = Yes</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">writeable = Yes</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">writelist = pi</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">create mask = 0777</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">directory mask = 0777</span><br></span></code></pre></div></div>
<p>然后重启 samba 服务，并添加当前账户：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">service</span><span class="token plain"> smbd restart</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> smbpasswd </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-a</span><span class="token plain"> pi</span><br></span></code></pre></div></div>
<p>这样在局域网里就能够发现树莓派了。用 pi 的账号密码连接，就可以轻松挂载共享的文件夹。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=流媒体服务器>流媒体服务器<a href=#流媒体服务器 class=hash-link aria-label=流媒体服务器的直接链接 title=流媒体服务器的直接链接>​</a></h3>
<p>流媒体服务器通过 DLNA 协议，首先安装 minidlna：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> minidlna</span><br></span></code></pre></div></div>
<p>之后修改配置文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">vim</span><span class="token plain"> /etc/minidlna.conf</span><br></span></code></pre></div></div>
<p>修改内容，主要是流媒体服务器读取文件的路径。注意 minidlna 可以根据媒体类型分别设置路径：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"># A 代表音频 P 代表图片 V 代表视频</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">media_dir = A,/path/to/audio</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">media_dir = P,/path/to/picture</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">media_dir = V,/path/to/video</span><br></span></code></pre></div></div>
<p>启动 minidlna 服务：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">service</span><span class="token plain"> minidlna start</span><br></span></code></pre></div></div>
<p>然后打开兼容 DLNA 协议的播放器（如 VLC），就可以直接播放硬盘里的流媒体了。另外，minidlna 还会开放 8200 端口显示媒体数量等一些信息。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=minecraft-服务器>Minecraft 服务器<a href=#minecraft-服务器 class=hash-link aria-label="Minecraft 服务器的直接链接" title="Minecraft 服务器的直接链接">​</a></h2>
<p>搭建一个 Minecraft 服务器也是树莓派不错的归宿。之前我尝试过使用免费的 Google Cloud 实例，性能非常差一下子就会崩掉。而我家又由于 Xfinity 的网关原因，无法成功转到公网上。因此采用的办法是树莓派运行服务器，通过内网穿透反向代理到 Google Cloud 实例上。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=运行>运行<a href=#运行 class=hash-link aria-label=运行的直接链接 title=运行的直接链接>​</a></h3>
<p>安装 JRE：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> default-jre</span><br></span></code></pre></div></div>
<p>选择合适的 Minecraft 服务器。我选择的是 <a href=https://github.com/PaperMC/Paper target=_blank rel="noopener noreferrer">PaperSpigot</a>，一个高性能的 Spigot fork。注意树莓派由于性能原因不建议使用太高版本，以 PaperSpigot-1.7.10-R0.1-SNAPSHOT-latest.jar 为例，执行：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-jar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-Xmx840M</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-Xms840M</span><span class="token plain"> PaperSpigot-1.7.10-R0.1-SNAPSHOT-latest.jar nogui</span><br></span></code></pre></div></div>
<p>Minecraft 服务器就在 25565 端口上启动了。插件只需要放入同目录的 <code>/plugins</code> 文件夹，重启服务器即可以自动启动。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=内网穿透>内网穿透<a href=#内网穿透 class=hash-link aria-label=内网穿透的直接链接 title=内网穿透的直接链接>​</a></h3>
<p>内网穿透使用 <a href=https://github.com/fatedier/frp target=_blank rel="noopener noreferrer">frp</a>，具体的使用文档可以看<a href=https://github.com/fatedier/frp/blob/master/README_zh.md target=_blank rel="noopener noreferrer">这里</a>。下载时注意架构和操作系统，这里我的 Google Cloud 实例是 linux-amd64，树莓派是 linux-arm。</p>
<p>将 linux-amd64 的 frps 和 frps.ini 放到 GCP 实例上，编辑 frps.ini：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"># frps.ini</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">[common]</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">bind_port = 7000 # 服务器使用 7000 端口和树莓派通信</span><br></span></code></pre></div></div>
<p>启动 frps：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">./frps </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> ./frps.ini</span><br></span></code></pre></div></div>
<p>将 linux-arm 的 frpc 和 frpc.ini 放到树莓派上，编辑 frpc.ini：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"># frpc.ini</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">[common]</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">server_addr = x.x.x.x # 公网 IP 地址</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">server_port = 7000 # 服务器使用的端口</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">[minecraft]</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">type = tcp</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">local_ip = 127.0.0.1</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">local_port = 25565 # minecraft 服务器开启的端口</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">remote_port = 6000 # 远程用来连接的端口</span><br></span></code></pre></div></div>
<p>启动 frpc：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain">./frpc </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-c</span><span class="token plain"> ./frpc.ini</span><br></span></code></pre></div></div>
<p>最后在任意一台机器上连接 Minecraft 服务器，地址为 <code>服务器公网 IP:6000</code>。在我的两人生存服上树莓派的负载约为 10%，可以较为轻松的应对低版本 Minecraft 服务器的工作。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=智能家居>智能家居<a href=#智能家居 class=hash-link aria-label=智能家居的直接链接 title=智能家居的直接链接>​</a></h2>
<p>智能家居部分主要是运行了两个服务：</p>
<ul>
<li><a href=https://github.com/homebridge/homebridge target=_blank rel="noopener noreferrer">HomeBridge</a>：将 IoT 设备桥接至 HomeKit</li>
<li><a href=https://github.com/philippe44/AirConnect target=_blank rel="noopener noreferrer">AirConnect</a>：将 Chromecast 设备桥接至 AirPlay</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安装-nodejs-及-pm2>安装 Node.js 及 pm2<a href=#安装-nodejs-及-pm2 class=hash-link aria-label="安装 Node.js 及 pm2的直接链接" title="安装 Node.js 及 pm2的直接链接">​</a></h3>
<p>我们使用 pm2 作为进程管理工具。首先安装 Node.js LTS，跟着<a href=https://github.com/nodesource/distributions/blob/master/README.md target=_blank rel="noopener noreferrer">文档</a>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-fsSL</span><span class="token plain"> https://rpm.nodesource.com/setup_lts.x </span><span class="token operator" style="color:hsl(221, 87%, 60%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">bash</span><span class="token plain"> -</span><br></span><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-y</span><span class="token plain"> nodejs</span><br></span></code></pre></div></div>
<p>然后安装 pm2：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">npm</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-g</span><span class="token plain"> pm2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=homebridge>HomeBridge<a href=#homebridge class=hash-link aria-label=HomeBridge的直接链接 title=HomeBridge的直接链接>​</a></h3>
<p>安装 HomeBridge 及 <code>homebridge-config-ui-x</code>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class=codeBlockLines_e6Vv><span class=token-line style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">npm</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-g</span><span class="token plain"> --unsafe-perm homebridge homebridge-config-ui-x</span><br></span></code></pre></div></div>
<p>然后根据 <a href=https://github.com/homebridge/homebridge/blob/master/config-sample.json target=_blank rel="noopener noreferrer">config-sample.json</a> 编写自己的配置文件，放到 <code>~/.homebridge/config.json</code>，之后运行 <code>homebridge</code> 命令启动，并使用 iOS 上的 Home 应用进行初始化。完成后即可通过 <code>pm2 start homebridge</code> 来使用 pm2 管理进程。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=airconnect>AirConnect<a href=#airconnect class=hash-link aria-label=AirConnect的直接链接 title=AirConnect的直接链接>​</a></h3>
<p>对于 AirConnect 我们只需要它的一个组件 <code>aircast</code>。作者提供了<a href=https://github.com/philippe44/AirConnect/blob/master/bin/aircast-arm target=_blank rel="noopener noreferrer">编译好的 ARM 架构二进制</a>，直接下载后 scp 到树莓派上，修改权限后使用 <code>pm2 start aircast-arm</code> 即可。</p>
<p>pm2 管理的进程初始化好之后，需要用 <code>pm2 save</code> 保存下配置，之后再次启动可以使用 <code>pm2 resurrect</code> 快速恢复。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=总结>总结<a href=#总结 class=hash-link aria-label=总结的直接链接 title=总结的直接链接>​</a></h2>
<p>树莓派还是挺实用的，一个极低功耗的完整 Linux 设备，外加 MicroSD 卡可以扩展较大的存储（我使用的 256GB），可以在家里便捷地实现文件共享、简单的自动化等操作。期待以后能有性能更强的 Pi 可以更为流畅地负担日常任务。</div><footer class=docusaurus-mt-lg><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/tags/daily>daily</a><li class=tag_QGVx><a rel=tag class="tag_zVej tagRegular_sFm0" href=/tags/gears>gears</a></ul></div></div></footer></article><div id=disqus_thread></div><nav class="pagination-nav docusaurus-mt-lg" aria-label=博文分页导航><a class="pagination-nav__link pagination-nav__link--prev" href=/2017/12/19/data-structure-note><div class=pagination-nav__sublabel>较新一篇</div><div class=pagination-nav__label>数据结构笔记</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/2017/07/10/surface-pro><div class=pagination-nav__sublabel>较旧一篇</div><div class=pagination-nav__label>Surface Pro 体验</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#初始化 class="table-of-contents__link toc-highlight">初始化</a><ul><li><a href=#安装系统 class="table-of-contents__link toc-highlight">安装系统</a><li><a href=#无头启动 class="table-of-contents__link toc-highlight">“无头”启动</a><li><a href=#设置 class="table-of-contents__link toc-highlight">设置</a></ul><li><a href=#搭建下载机 class="table-of-contents__link toc-highlight">搭建下载机</a><ul><li><a href=#挂载硬盘 class="table-of-contents__link toc-highlight">挂载硬盘</a><li><a href=#安装-aria2 class="table-of-contents__link toc-highlight">安装 aria2</a><li><a href=#远程控制 class="table-of-contents__link toc-highlight">远程控制</a><li><a href=#文件服务器 class="table-of-contents__link toc-highlight">文件服务器</a><li><a href=#流媒体服务器 class="table-of-contents__link toc-highlight">流媒体服务器</a></ul><li><a href=#minecraft-服务器 class="table-of-contents__link toc-highlight">Minecraft 服务器</a><ul><li><a href=#运行 class="table-of-contents__link toc-highlight">运行</a><li><a href=#内网穿透 class="table-of-contents__link toc-highlight">内网穿透</a></ul><li><a href=#智能家居 class="table-of-contents__link toc-highlight">智能家居</a><ul><li><a href=#安装-nodejs-及-pm2 class="table-of-contents__link toc-highlight">安装 Node.js 及 pm2</a><li><a href=#homebridge class="table-of-contents__link toc-highlight">HomeBridge</a><li><a href=#airconnect class="table-of-contents__link toc-highlight">AirConnect</a></ul><li><a href=#总结 class="table-of-contents__link toc-highlight">总结</a></ul></div></div></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>更多</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/>Blog</a><li class=footer__item><a class=footer__link-item href=/link>友链</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 NOWHERE</div></div></div></footer></div>